---
layout: post
title: Controlling a Drone with a PS4 Controller
---

This post details a method of using a Playstation 4 controller as an input method to control a drone running Betaflight firmware (or similar). Essentially it uses an on-board companion computer such as a Raspberry Pi to connect to the controller, convert the signals and send them to the flight controller using the [MultiWii Serial Protocol](http://www.multiwii.com/wiki/index.php?title=Multiwii_Serial_Protocol). Although a Playstation 4 controller is used here, the method should allow any standard game controller to be used in the same way.

*Note: Understand that MSP is not usually recommended as an input method during flight by the Betaflight team, and so requires modification to the built-in failsafes. Don't contact me if you crash your drone or damage anything using the control method detailed here*

(fancy schematic of everything will go here)

### Controller Inputs

To start, the PS4 controller can be connected to the Raspberry Pi using bluetooth. This can be done either through the terminal using bluetoothctl or with a third party gui. Once it is connected, Approximate Enigneering's [Python Controller Library](https://approxeng.github.io/approxeng.input/index.html) is used to get the controller inputs. For this project, only the two analog sticks and some buttons will be used, but the controller library can get the values from the touchpad and internal inertial measurement unit.
